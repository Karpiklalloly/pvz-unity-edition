# План реализации

- [x] 1. Настройка базовой структуры проекта и ECS





  - Создать основные компоненты для растений, зомби и игрового состояния
  - Настроить DragonECS pipeline с основными системами
  - Создать базовые ScriptableObject для конфигурации
  - _Требования: 8.1, 8.3_

- [x] 2. Реализация системы сетки газона




  - [x] 2.1 Создать компонент LawnGrid и систему управления сеткой


    - Реализовать компонент LawnGrid с параметрами сетки
    - Создать систему GridSystem для управления позициями на сетке
    - Добавить методы конвертации между мировыми и сеточными координатами
    - _Требования: 2.1, 2.2_

  - [x] 2.2 Реализовать визуализацию сетки газона


    - Создать систему рендеринга сетки для отладки
    - Добавить визуальные индикаторы доступных клеток
    - Реализовать подсветку клеток при наведении мыши
    - _Требования: 2.1, 7.4_

- [ ] 3. Создание системы растений
  - [ ] 3.1 Реализовать базовые компоненты растений
    - Создать компоненты Plant, PlantType, PlantCost
    - Создать ScriptableEntityTemplate для разных типов растений
    - Добавить систему создания растений на сетке через шаблоны
    - _Требования: 8.1, 8.3_

  - [ ] 3.2 Создать систему размещения растений
    - Реализовать PlantPlacementSystem для обработки кликов мыши
    - Добавить валидацию размещения (проверка пустой клетки, достаточности солнца)
    - Создать PlacementValidationSystem для проверки правил размещения
    - _Требования: 2.2, 2.3, 2.4_

  - [ ] 3.3 Реализовать атакующие растения
    - Создать компонент PlantAttack для боевых растений
    - Реализовать PlantAttackSystem для автоматической атаки зомби
    - Добавить систему создания и движения снарядов
    - _Требования: 4.1, 4.2, 4.3, 4.4_

- [ ] 4. Создание системы зомби
  - [ ] 4.1 Реализовать базовые компоненты зомби
    - Создать компоненты Zombie, ZombieType, ZombieLane
    - Создать ScriptableEntityTemplate для разных типов зомби
    - Добавить компонент ZombieReward для награды за убийство
    - _Требования: 8.2, 8.5_

  - [ ] 4.2 Создать систему движения зомби
    - Реализовать ZombieMovementSystem для движения по дорожкам
    - Добавить логику достижения дома и завершения игры
    - Создать систему обработки столкновений зомби с растениями
    - _Требования: 3.2, 3.3_

  - [ ] 4.3 Реализовать систему спавна зомби
    - Создать ZombieSpawnSystem для создания зомби по волнам
    - Реализовать WaveManagementSystem для управления волнами
    - Добавить WaveData ScriptableObject для конфигурации волн
    - _Требования: 3.1, 6.3_

- [ ] 5. Создание системы солнца
  - [ ] 5.1 Реализовать генерацию солнца растениями
    - Создать компонент SunGenerator для солнце-генерирующих растений
    - Реализовать SunGenerationSystem для периодического создания солнца
    - Добавить компонент Sun для объектов солнца
    - _Требования: 5.1, 5.2_

  - [ ] 5.2 Создать систему сбора солнца
    - Реализовать SunCollectionSystem для обработки кликов по солнцу
    - Добавить анимацию падения и сбора солнца
    - Создать систему автоматического исчезновения несобранного солнца
    - _Требования: 5.3, 6.2_

  - [ ] 5.3 Реализовать управление солнцем игрока
    - Создать компонент PlayerSun для хранения количества солнца
    - Добавить систему начального солнца при старте уровня
    - Реализовать проверку достаточности солнца при размещении растений
    - _Требования: 6.1, 2.3_

- [ ] 6. Создание системы боя
  - [ ] 6.1 Реализовать систему снарядов
    - Создать компоненты Projectile, ProjectileTarget, ProjectileSpeed
    - Реализовать ProjectileMovementSystem для движения снарядов
    - Создать ScriptableEntityTemplate для разных типов снарядов
    - _Требования: 4.2, 4.3_

  - [ ] 6.2 Создать систему нанесения урона
    - Реализовать DamageSystem для обработки попаданий снарядов
    - Добавить систему здоровья для зомби и защитных растений
    - Создать DeathSystem для обработки уничтожения объектов
    - _Требования: 4.3, 3.4, 6.2_

  - [ ] 6.3 Реализовать защитные растения
    - Создать компонент DefensivePlant для растений-стен
    - Добавить логику поедания защитных растений зомби
    - Реализовать систему блокировки движения зомби
    - _Требования: 8.1, 8.3_

- [ ] 7. Создание пользовательского интерфейса
  - [ ] 7.1 Реализовать UI выбора растений перед уровнем
    - Создать PlantSelectionUISystem для экрана выбора растений
    - Добавить отображение доступных растений с характеристиками
    - Реализовать ограничение количества выбираемых растений
    - _Требования: 1.1, 1.2, 1.3, 1.4_

  - [ ] 7.2 Создать игровой UI
    - Реализовать отображение текущего количества солнца
    - Добавить панель с выбранными растениями и их стоимостью
    - Создать индикатор прогресса волны зомби
    - _Требования: 7.1, 7.2, 7.3_

  - [ ] 7.3 Реализовать UI размещения растений
    - Создать систему отображения зоны действия растений при выборе
    - Добавить визуальную обратную связь при размещении
    - Реализовать отображение ошибок (недостаточно солнца, занятая клетка)
    - _Требования: 7.4, 2.3_

- [ ] 8. Создание системы ввода
  - [ ] 8.1 Реализовать обработку мыши
    - Создать MouseInputSystem для обработки кликов мыши
    - Добавить систему определения клетки сетки по позиции мыши
    - Реализовать обработку кликов по растениям, зомби и солнцу
    - _Требования: 2.1, 5.3_

  - [ ] 8.2 Создать систему UI ввода
    - Реализовать UIInputSystem для обработки кликов по UI элементам
    - Добавить обработку выбора растений из панели
    - Создать систему навигации между экранами
    - _Требования: 1.1, 7.3_

- [ ] 9. Создание шаблонов и конфигурации
  - [ ] 9.1 Создать ScriptableEntityTemplate для растений
    - Создать шаблоны для разных типов растений (Peashooter, Sunflower, Wall-nut)
    - Настроить компоненты для каждого типа растения в шаблонах
    - Добавить визуальные префабы для растений
    - _Требования: 8.1, 8.3, 8.4_

  - [ ] 9.2 Создать ScriptableEntityTemplate для зомби
    - Создать шаблоны для разных типов зомби (Basic, Cone-head, Bucket-head)
    - Настроить компоненты здоровья, скорости и способностей в шаблонах
    - Добавить визуальные префабы для зомби
    - _Требования: 8.2, 8.5_

  - [ ] 9.3 Создать конфигурацию волн и уровней
    - Создать WaveData ScriptableObject для конфигурации волн зомби
    - Реализовать GameConfig для общих настроек игры
    - Добавить поддержку разных уровней с уникальными настройками
    - _Требования: 6.3, 6.4_

- [ ] 10. Интеграция и тестирование
  - [ ] 10.1 Создать основной игровой цикл
    - Интегрировать все системы в единый ECS pipeline
    - Реализовать переходы между состояниями игры
    - Добавить систему паузы и перезапуска уровня
    - _Требования: 6.4, 3.3_

  - [ ] 10.2 Реализовать базовое тестирование
    - Создать автоматизированные тесты для основных систем
    - Добавить тесты для логики размещения растений
    - Реализовать тесты для системы боя и движения зомби
    - _Требования: все основные требования_

  - [ ] 10.3 Создать демонстрационный уровень
    - Настроить полный игровой уровень с растениями и зомби
    - Добавить визуальные эффекты и анимации
    - Реализовать условия победы и поражения
    - _Требования: все требования_